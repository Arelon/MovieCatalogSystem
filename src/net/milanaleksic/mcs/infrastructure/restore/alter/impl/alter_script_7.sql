drop table DB2ADMIN.Tag if exists;

drop table DB2ADMIN.HasTag if exists;

CREATE TABLE DB2ADMIN.Tag (
    IdTag INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,
    Naziv varchar(100) NOT NULL
);

CREATE TABLE DB2ADMIN.HasTag (
    IdFilm INTEGER,
    IdTag INTEGER
);

ALTER TABLE DB2ADMIN.HasTag  ADD  FOREIGN KEY(IdFilm)
REFERENCES DB2ADMIN.Film (IdFilm)
ON DELETE CASCADE;

ALTER TABLE DB2ADMIN.HasTag  ADD  FOREIGN KEY(IdTag)
REFERENCES DB2ADMIN.Tag (IdTag)
ON DELETE CASCADE;

DROP INDEX DB2ADMIN.IDX_HASTAG_IDFILM IF EXISTS;
CREATE INDEX DB2ADMIN.IDX_HASTAG_IDFILM on DB2ADMIN.HASTAG("IDFILM");

DROP INDEX DB2ADMIN.IDX_HASTAG_IDTAG IF EXISTS;
CREATE INDEX DB2ADMIN.IDX_HASTAG_IDTAG on DB2ADMIN.HASTAG("IDTAG");

UPDATE DB2ADMIN.PARAM SET Value = '7' WHERE Name = 'VERSION';
